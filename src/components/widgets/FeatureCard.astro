---
import type { CollectionEntry } from "astro:content";
const { feature } = Astro.props;
interface Props {
  feature: CollectionEntry<"feature">;
}
---

<div class="group perspective h-[400px] w-full cursor-pointer">
  <div class="relative preserve-3d duration-1000 ease-in-out h-full w-full">
    <!-- Front of card -->
    <div class="absolute w-full h-full backface-hidden">
      <div class="rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 relative bg-gradient-to-br from-[#e5edf7] to-[#e5edf7] p-8 overflow-hidden h-full border border-slate-700/50">
        <div class="flex items-center justify-center size-24 text-white text-center rounded-full p-4 bg-gradient-to-r from-cyan-600 to-cyan-500 group-hover:from-cyan-500 group-hover:to-cyan-400 transition-colors duration-500 shadow-lg">
          <p class="font-bold">{feature.data.name}</p>
        </div>
        <div class="content mt-8 relative z-10">
          <a
            href="https://dubai-hikvision.com/products"
            class="title text-xl font-bold text-black hover:text-cyan-600 transition-colors duration-300 block mb-4"
          >
            {feature.data.title}
          </a>
          <p class="text-black leading-relaxed">{feature.data.body}</p>
        </div>
        <div class="absolute -bottom-4 -right-4 transform group-hover:rotate-12 transition-transform duration-500">
          <i
            data-feather="trending-up"
            class="size-48 text-cyan-500/10 group-hover:text-cyan-400/20 transition-colors duration-500"
          ></i>
        </div>
        <div class="absolute inset-0 bg-gradient-to-tr from-cyan-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
      </div>
    </div>

    <!-- Back of card -->
    <div class="absolute inset-0 h-full w-full [transform:rotateY(180deg)] backface-hidden">
      <div class="rounded-xl shadow-lg transform transition-all duration-300 relative bg-gradient-to-br from-[#e5edf7] to-[#e5edf7] p-8 overflow-hidden h-full border border-slate-700/50">
        <div class="flex flex-col items-center justify-center h-full text-black">
          <h3 class="text-2xl font-bold mb-4">{feature.data.name}</h3>
          <p class="text-black text-center">{feature.data.body}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .perspective {
    perspective: 1000px;
  }
  .preserve-3d {
    transform-style: preserve-3d;
  }
  .backface-hidden {
    backface-visibility: hidden;
  }
  .flip {
    transform: rotateY(180deg);
  }
</style>

<script>
  document.querySelectorAll('.group').forEach(card => {
    card.addEventListener('click', () => {
      const relativeElement = card.querySelector('.relative');
      if (relativeElement) {
        relativeElement.classList.toggle('flip');
      }
    });
  });
</script>